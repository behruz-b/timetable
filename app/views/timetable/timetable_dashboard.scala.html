@this(webJarsUtil: org.webjars.play.WebJarsUtil)
@()
@import views.html.main
  @main("TimeTable - Dashboard", webJarsUtil) {
    <script src="@routes.Assets.versioned("javascripts/timetable_dashboard.js")" type="text/javascript"></script>
    <style type="text/css">
            .table-title .add-new {
              float: right;
              height: 30px;
              font-weight: bold;
              font-size: 12px;
              text-shadow: none;
              min-width: 100px;
              border-radius: 50px;
              line-height: 13px;
            }
            .table-title .add-new i {
              margin-right: 4px;
            }
            table.table tr th, table.table tr td {
              border-color: #e9e9e9;
            }
            table.table th i {
              font-size: 13px;
              margin: 0 5px;
              cursor: pointer;
            }
            table.table th:last-child {
              width: 100px;
            }
            table.table td a {
              cursor: pointer;
              display: inline-block;
              margin: 0 5px;
              min-width: 24px;
            }
            table.table td a.add {
              color: #27C46B;
            }
            table.table td a.edit {
              color: #FFC107;
            }
            table.table td a.delete {
              color: #E34724;
            }
            table.table td i {
              font-size: 19px;
            }
            table.table td a.add i {
              font-size: 24px;
              margin-right: -1px;
              position: relative;
              top: 3px;
            }
            table.table .form-control {
              height: 32px;
              line-height: 32px;
              box-shadow: none;
              border-radius: 2px;
            }
            table.table .form-control.error {
              border-color: #f50000;
            }
            table.table td .add {
              display: none;
            }
    </style>
    <script type="text/javascript">
            $(document).ready(function(){
              $('[data-toggle="tooltip"]').tooltip();
              var actions = $("table td:last-child").html();
              // Append table with add row form on add new button click
              $(".add-new").click(function(){
                $(this).attr("disabled", "disabled");
                var index = $("table tbody tr:last-child").index();
                var row = '<tr>' +
                        '<td><input type="text" class="form-control" name="name" id="name"></td>' +
                        '<td><input type="text" class="form-control" name="department" id="department"></td>' +
                        '<td><input type="text" class="form-control" name="phone" id="phone"></td>' +
                        '<td>' + actions + '</td>' +
                        '</tr>';
                $("table").append(row);
                $("table tbody tr").eq(index + 1).find(".add, .edit").toggle();
                $('[data-toggle="tooltip"]').tooltip();
              });
              // Add row on add button click
              $(document).on("click", ".add", function(){
                var empty = false;
                var input = $(this).parents("tr").find('input[type="text"]');
                input.each(function(){
                  if(!$(this).val()){
                    $(this).addClass("error");
                    empty = true;
                  } else{
                    $(this).removeClass("error");
                  }
                });
                $(this).parents("tr").find(".error").first().focus();
                if(!empty){
                  input.each(function(){
                    $(this).parent("td").html($(this).val());
                  });
                  $(this).parents("tr").find(".add, .edit").toggle();
                  $(".add-new").removeAttr("disabled");
                }
              });
              // Edit row on edit button click
              $(document).on("click", ".edit", function(){
                $(this).parents("tr").find("td:not(:last-child)").each(function(){
                  $(this).html('<input type="text" class="form-control" value="' + $(this).text() + '">');
                });
                $(this).parents("tr").find(".add, .edit").toggle();
                $(".add-new").attr("disabled", "disabled");
              });
              // Delete row on delete button click
              $(document).on("click", ".delete", function(){
                $(this).parents("tr").remove();
                $(".add-new").removeAttr("disabled");
              });
            });
    </script>
    @navbar()
    <div class="container">
      <div class="text-center">
        <br><br><br><br><br>
        <h1>Timetable Dashboard</h1>
        <form action="">
          <div class="form-group row">
            <label class="col-sm-2 offset-sm-2 col-12 offset-0 col-form-label font-weight-bold">Teacher's name</label>
            <div class="col-sm-6 col-12 offset-0">
              <input type="text" class="form-control" placeholder="Type here..." data-bind="value: vm.teacherName">
            </div>
          </div>
        </form>
        <div class="table-responsive text-nowrap">
          <table class="table table-hover table-condensed table-bordered">
            <thead style="background: linen;">
              <tr>
                <th scope="col">â„–</th>
                <th scope="col">Study Shift</th>
                <th scope="col">Week Day</th>
                <th scope="col">Couple</th>
                <th scope="col">Type Of Lesson</th>
                <th scope="col">Groups</th>
                <th scope="col">Subject Id</th>
                <th scope="col">Teacher's Name</th>
                <th scope="col">Number Room</th>
                <th scope="col">Action</th>
              </tr>
            </thead>
            <tbody class="" data-bind="foreach: vm.timetableList">
              <tr>
                <th scope="row" data-bind="text: $data.id"></th>
                <td data-bind="text: $data.studyShift"></td>
                <td data-bind="text: $data.weekDay"></td>
                <td data-bind="text: $data.couple"></td>
                <td data-bind="text: $data.typeOfLesson"></td>
                <td data-bind="text: $data.groups"></td>
                <td data-bind="text: $data.subjectId"></td>
                <td data-bind="text: $data.teachers"></td>
                <td data-bind="text: $data.numberRoom"></td>
                <td>
                  <a class="add mr-3" title="Add" data-toggle="tooltip"><i class="fas fa-edit"></i></a>
                  <a class="mr-3 edit" title="Edit" data-toggle="tooltip" ><i class="fas fa-pen-alt"></i></a>
                  <a class="delete" title="Delete" data-toggle="tooltip"><i class="fas fa-trash-alt"></i></a>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>

  }
